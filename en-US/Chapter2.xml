<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "manual.ent">
<!ENTITY PRODUCT "Documentation">
<!ENTITY BOOKID "manual">
<!ENTITY YEAR "2016">
<!ENTITY HOLDER "Eneo Tecnología S.L. |">
]>
<chapter>
	<title>Installation of the Enterprise Version redborder Manager</title>
	<para>Thanks to an assisted installation, the Manager can be configured and prepared quickly and easily without the need for specific Linux programming knowledge. The requirements 
	and recommendations for the correct installation of the Manager for redborder Malware are described below.</para> 
	<section>
		<title>Basic Scenario for the Installation of redborder Malware</title>
		<para>A sample scenario proposed for the solution consists of joining the sensors deployed in different sensitive points in the organization's network
		 that will connect to a Manager or cluster of managers to be managed and monitored.</para>
		<para>In the case of implementing the first release of redborder Malware, it is a simple escenario given that it does not present mechanisms of high availability, balancing, routing, etc., 
		but allows a series of real life use cases to be validated.</para>
		<para>For the planning of the installation of the sensors, some fundamental aspects must be kept in mind:</para> 
		<itemizedlist mark="circle">
			<listitem>
				<para><emphasis role="bold">Bypass segments:</emphasis> are specific paired network interfaces with bypass support. These interfaces will be placed in the middle of the traffic to be analyzed.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">Management interfaces:</emphasis> are network interfaces for communicating between the managers, sensors, external devices, etc.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">Synchronization interfaces:</emphasis> are network interfaces for the internal communication of services between the managers in the cluster.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">IPMI access interfaces:</emphasis> are network interfaces that are exclusively used for the remote management of hardware. Some use examples are: 
				SOL connections or Serial Over Lan, iKVM, IPMI commands such as start, restart, shut down, etc.</para>
			</listitem>
		</itemizedlist>
		<para>For the <emphasis role="bold">Manager</emphasis> the only condition in terms of network equipment is <emphasis role="bold">the existence, at least, of a network interface. </emphasis></para>
		<para>redborder does not use physical network interfaces directly, but rather creates a system of logical interfaces called bonding which operate over said physical network interfaces.</para>
		<para>A bonding will thus be created for the management and connection of the sensors and, if applicable, another bonding for its communications to other networks.
		Both systems support the 802 standard.1q for virtual LAN (optional when configuring).</para>
		<warning>
			<title>Warning</title>
			<para>It is VERY IMPORTANT that the configuration of the Manager (or cluster of managers) be done before configuring the sensorse.</para>
			<para>The Manager must be operative and in a network that is accessible to the sensors. Some of the configuration processes of the sensors depend on the access to the Manager. 
			<footnote><para>The installation scenario of the redobrder Manager is the same regardless of the sensors being installed and registered in it.</para></footnote>.</para>
		</warning>
		<para>The scenario proposed as an example for this first release is made up of a switched network of five important elements:</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para><emphasis role="bold">redborder Manager:</emphasis></para>
				<para>Central element in which all of the information eitted by the different sensors is received, treated and visualized. 
				Certain aspects of the sensors can be configured from the redborder web platform.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder IDS:</emphasis></para>
				<para>Sensor through which network traffic passes to be analyzed. Configured in IDS mode it is able to detect traffic patterns corresponding to 
				possible attacks and/ or Malware. 
				Once registered in the Manager, it sends the results along with the files detected. The rules used by the analysis will be managed 
				from the redborder web platform.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder Mail Gateway:</emphasis></para>
				<para>Sensor through which the mail (SMTP) traffic passes. It works as a simple MTA (Mail Traffic Agent). Each time the sensor receives 
				an email it resends it to the corresponding mail server. 
				Additionally, it sends a copy of the emails and their attachments, including additional information, to the Manager. This sensor must be registered
				in the Manager in order for it to function correctly.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder Proxy ICAP:</emphasis></para>
				<para>The Proxy ICAP server guarantees the user a complete monitoring of the interactions occuring within their network.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder EndPoint:</emphasis></para>
				<para>The EndPoint service has been designed for the monitoring and analysis of the activity of the devices/ systems
				that make up the network infrastructure of a company and that will be analyzed with the redborder Malware App.</para>
			</listitem>
		</itemizedlist>
		<warning>
			<title>Warning</title>
			<para>The scenario corresponding to this release has been modified so that the emails are not resent to another email server.</para>	
		</warning>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img001.png"/>
			</imageobject>
			<caption>
				<para>Basic redborder Malware scenario</para>
			</caption>
		</mediaobject>		    
	</section>
	<section>
		<title>Installation of the redborder Malware Manager</title>
		<para>For the installation of the Manager, the user will have a <emphasis role="bold">ISO image</emphasis> obtained by a download from the official redborder page. 
		The ISO image is prepared for the installation in both physical machines and virtual machines whether the installation media is a DVD or a USB unit. In any case, 
		once the first phase of the installation is done, the system will restart and will boot from the default option: <literal>Select from local disk.</literal></para>
		<para>Upon booting, the installation wizard will have access to a menue where the following options will be found:</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para><literal>Install Manager:</literal> launches the Manager installation menu.</para>
			</listitem>
			<listitem>
				<para><literal>Install Sensor:</literal> this option allows for the installation and configuration of the sensor. <footnote><para>Depending on 
				the solution that has been acquired, the different options for the installation and registration of the sensors fof the different Apps will appear in the Manager: 
				IPS sensor and/ or Gateway Sensor.</para>
				</footnote></para>
			</listitem>
			<listitem>
				<para><literal>Rescue installed system:</literal> rescue start mode for cases in which there are start problems with the machine (advanced mode). 
				It also allows for the problem solving procedure to be initiated or to change the user's password if it is forgotten.</para>
			</listitem>
			<listitem>
				<para><literal>Boot from Local Drive:</literal> boots from the local drive (by default).</para>
			</listitem>
			<listitem>
				<para><literal>Memory Test:</literal> memory test available for the installation of the system. If some memory mode
				is defective, this test will detect it and will notify the user.</para>
			</listitem>
		</itemizedlist>
		<note>
			<title>Note</title>
			<para>It is advisable to review the memory status of the machine before beginning the installation of the second Manager.</para>
		</note>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img001.png"/>
			</imageobject>
			<textobject>
				<phrase>Main boot screen of the redborder Manager installation media</phrase>
			</textobject>
				<caption>
					<para>Main installation wizard screen of the redborder Manager</para>
				</caption>
		</mediaobject>
		<section>
			<title>Structure and Operation of the redborder Installation Wizard Menus</title>
			<para><emphasis role="bold">Menu, submenu and command line</emphasis></para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img002.png"/>
				</imageobject>
				<textobject>
					<phrase>Structure and operation of the redborder installation wizard menus</phrase>
				</textobject>
				<caption>
					<para>Structure and operation of the redborder installation wizard menus</para>
				</caption>
			</mediaobject>
			<para><emphasis>Menu</emphasis></para>
			<para>In the left margin of the screen you will find a list of the available options. To select any of them you only need to enter the number or letter corresponding to the option you want to choose
			in the <literal>Selection</literal> line.</para>
			<para><emphasis>Submenú</emphasis></para>
			<para>If different actions can be performed with the selected option, a submenu will appear in the right margin of the screen.</para>
			<para><emphasis>Command line / option selector</emphasis></para>
			<para>In the upper margin, and separated graphically from the menu and submenu, we see the area in which the selections of the 
			<literal>Selection</literal> line must be indicated and we must enter the commands or data requested to execute the pertinent actions. 
			In this area we will see the system date and time (UTC by default).</para>
		</section>
		<section>
			<title>Selection of Options</title>
			<para><emphasis role="bold">Predetermined options</emphasis></para>
			<para>In some cases, the system will show a series of predetermined options. If it is the answer to a question, the option defined by default 
			will be seen in capital letters.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img003.png"/>
				</imageobject>
				<caption>
					<para>Selection of predetermined options</para>
				</caption>
			</mediaobject>
			<para><emphasis role="bold">Options available in the redborder installation wizard menu</emphasis></para>
			<itemizedlist mark="bullet">
				<listitem>
					<para>Selection of default option: press <keycap>Enter.</keycap></para>
				</listitem>
				<listitem>
					<para>Other options: enter the corresponding letter or command.</para>
				</listitem>
				<listitem>
					<para>Exit: when you would like to exit the screen to return to the start menu, select the option <literal>quit</literal>, entering the letter <keycap>q.</keycap></para>
				</listitem>
				<listitem>
					<para>Apply changes: to save the modifications made and apply changes, select the option <literal>apply</literal> by entering the letter <keycap>a.</keycap></para>
				</listitem>
			</itemizedlist>
			<mediaobject>
				<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img004.png"/>
				</imageobject>
				<caption>
					<para>Options available in the redborder installation wizard menu</para>
				</caption>
			</mediaobject>
			<warning>
				<title>Warning</title>
				<para><literal>Need to "apply" to activate changes</literal></para>
				<para>If you see this message, you must select the option <keycap>a</keycap>. Otherwise, the system will not save or apply the changes made.</para>
			</warning>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img005.png"/>
				</imageobject>
				<caption>
					<para>Apply changes to apply the modifications</para>
				</caption>
			</mediaobject>
		</section>
	</section>
    <section>
		<title>Installation Process of the Manager</title>
		 <para>The installation process of the Manager is prepared to perform unattended installations. 
		 If at any time a change needs to be made during the installation process, the default values would need to be modified.</para>
		 <warning>
			<title>Warning</title>
			<para>There is a limited time in which the values that the installer generates by default can be modified.
			It is advised to have the values clear before reaching this step in the installation.</para>
		</warning>
		 <para>The installation process of the manager interacts with the user to identify two parameters:</para>
		 <itemizedlist>
			<listitem>
				<para><emphasis>Selecting the destination unit of the installation</emphasis></para>
			</listitem>
			<listitem>
				<para><emphasis>Inserting and confirming the root password</emphasis></para>
			</listitem>
		</itemizedlist>   
		<para>Select <literal>Install Manager</literal> to begin the installation process of the Manager.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img013.png"/>
			</imageobject>
			<textobject>
					<phrase>Starting the installation process</phrase>
				</textobject>
				<caption>
					<para>Starting the installation process</para>
				</caption>
		</mediaobject>
		<para>A series of basic settings will be set below:</para>
		<para><emphasis role="bold">a) Select the destination where the redborder manager will be installed</emphasis></para>
		<para>Select the storage unite where the redborder manager will be installed.</para> 
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002a.png"/>
			</imageobject>
			<textobject>
					<phrase>Basic settings: selecting the destination storage unit of the installation</phrase>
				</textobject>
				<caption>
					<para>Basic settings: selecting the destination storage unit of the installation</para>
				</caption>
		</mediaobject>
		<para><emphasis role="bold">b) Insertion and confirmation of the root password</emphasis></para>
		<para><emphasis>Enter root password:</emphasis> This will be the key from this point forward. It can be modified at any time.</para>
		<para><emphasis>Confirm root password:</emphasis> Enter the key again to verify that you know it and that you have not made any typing errors.</para>
		<note>
			<title>Note</title>
			<para>Remember that the password that you have selected in this step will be that which you use to access both the redborder web platform and the
			and the system with the admin username and root respectively.</para>
			<para>The password created in the absence of user interaction is: redborder.</para>
		</note>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002b.png"/>
			</imageobject>
			<textobject>
					<phrase>Basic settings: root password</phrase>
			</textobject>
			<caption>
				<para>Basic settings: root password</para>
			</caption>
		</mediaobject>
		<para>The system will then create the partitions and perform the installation of the wizard packets of the selected unit.</para>
		<para><emphasis role= "bold">Installation of the packets and restarting of the system</emphasis></para>
		<para>Once the previous steps have been completed, the the software packets will be installed in the hard drive.</para>
		<para>Wait until the progress bar indicates that he installation has been completed 100%. This process may take several minutes.</para>
		<para>Do not press any key or perform any action until the process has finished.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002d.png"/>
			</imageobject>
			<textobject>
				<phrase>Installation of the packets</phrase>
			</textobject>
			<caption>
				<para>Installation of the packets</para>
			</caption>
		</mediaobject>
		<para>Once the packets have been installed, the program runs the last scripts to finalize this step. These last scripts may take several minutes depending on the
		 machine's capacity. The system must then be restarted automatically, finalizing the installation.</para>	
	</section>
    <section>
		<title>First Boot of the redobrder Manager</title>
		<para>After the post-installation automatic restart, the system will perform a series of adjustements in the configuration during the first start.
		In this configuration process the system will attempt to detect, amongst other settings, the configuration of the network interfaces. 
		There are two options depending on whether or not there is a DHCP server.</para>
		<section>
			<title>DHCP Configuration</title>
			<para>in this case there is at least one DHCP server that has assigned IP addresses to the network interfaces of the Manager. The Manager is operational and 
			ready to perform. It is not necessary to configure anything additional.</para>
			<para>Moreover, if there are several managers with IP addresses assigned by DHCP, 
			they will discover each other during the first login, provoking the automatic creation of the cluster. When the cluster is formed automatically
			the host names are generated randomly.</para>
		</section>
		<section>
			<title>Manual Network Configuration</title>
			<para>In this case the network interfaces do not have any IP address assigned, and so the Manager will need to be configured manually.</para>
		    <para>Once the first process of the first startup is complete, the system login screen will appear. We log in with the username <literal>root</literal> and the password that was created during the installation process</para>	
		    <mediaobject>
		    	<imageobject>
		    		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002e.png"/>
		    	</imageobject>
		    	<textobject>
		    			<phrase>Login screen</phrase>
		    		</textobject>
		    		<caption>
		    			<para>Login screen</para>
		    		</caption>
		    </mediaobject>
		    <note>
		    	<title>Note</title>
		    	<para>In order to perform the configuration of the Manager, it is necessary to register with the user that has the most permissions: <emphasis>root</emphasis></para>
		    </note>	
		    <para>To finalize the configuration of the Manager, we will execute the command <emphasis role="bold">rb_sysconf</emphasis> to launch the <literal>redborder Configuration menu.</literal> 
		    (Hereafter: redborder configuration menu)</para>
		    <para>We then have two ways to finalize the configuration of the redborder Manager: manually or running a configuration wizard.</para>
		    <important>
		       	<title>Important</title>
		       	<para>The steps that are going to be followed here are those that correspond to the installation of a Manager from zero al que se le va a unir otro Manager en cluster.</para>
		       	<para>If a Manager has already been installed, it will not be necessary to repeat the network configuration for it. The only network configuration that needs to be performed is for the new Manager being added to the cluster. 
		       	The user can manually configure the rest of the system parameters by selecting the option <keycap>1)</keycap><literal>System configuration</literal> in the redborder configuration menu.</para>
		    </important>
		    <section>
				<title>Manual Configuration</title>
				<para>This configuration method is not contemplated in this user manual due to its complex nature. It is strongly recommended that the configuration wizard be used.</para>
		    </section>
		    <section>
				<title>Using the configuration wizard: Start simple wizard </title>
				<para>When executing the <emphasis role="bold">rb_sysconf</emphasis> command, the options detailed below appear in menu form: </para>
		        <para><literal>1) System Configuration:</literal> configuration of the hostname, IP, time and status of the Manager.</para>
		        <para><literal>2) Network Configuration:</literal> creation of bondings, segments, DNS, routes and IPMI.</para>
		        <para><literal>3) Passwords:</literal> access this option if you wish to change the passwords defined for each user role.</para>
		        <para><literal>w) start simple wizard:</literal> start the wizard which will allow you to quickly and easily install and configure the Manager.</para>
		        <para><literal>q) quit:</literal> Quit. This returns us to the main system configuration screen.</para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img003.png"/>
		            </imageobject>
		            <textobject>
		        			<phrase>Main screen of the redborder configuration menu installation wizard</phrase>
		        		</textobject>
		        		<caption>
		        			<para>Main screen of the redborder configuration menu installation wizard</para>
		        		</caption>
		        </mediaobject>
		   	    <para>For the automatic installation of the Manager there is the option <keycap>w)</keycap><literal>start simple wizard</literal> 
		   	    in the submenu of the redborder configuration menu. This option facilitates the configuration process for the installation of a Manager
		   	     or for the joining of two or more managers to form a cluster.</para>
		        <para>As you can see, there is a series of default options. To accept them, you only need to press<keycap> Enter.</keycap> 
		        However, you can change them at any time in the installation process.</para>
		        <para><emphasis role="bold">Mode, Hostname and DNS</emphasis></para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img004.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Installing with simple wizard</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Installing with simple wizard: insert Hostname, domain, primary DNS, secondary DNS and server NTP</para>
		        	</caption>
		        </mediaobject>
		        <orderedlist numeration="arabic">
		        		<listitem>
		        			<para><literal>Selected Mode: single.</literal> This is the operating mode of the Manager. When the Manager is joined to another forming a cluster,
		        			 it will automatically change to cluster mode.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert Hostname [rbmanager]:</literal> the option defined by default is that of <literal>rbmanager.</literal> 
		        			This is a name that clearly and simply identifies the Manager and its position within the cluster.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert domain: [redborder.cluster]</literal> domain defined by default.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert Primary DNS:</literal> the server providing the DNS to your network and that which will be associated with the Manager must be indicated.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert Secondary DNS (optional):</literal> indicate the secondary DNS (optional). It is recommended that an alternative DNS be entered 
		        			to substitute the primary DNS in case of failure.</para>
		        		</listitem>
		        </orderedlist>
		        <note>
		        	<title>Note</title>
		        	<para>It is important that different names be used for each of the Managers that will be included in the cluster. 
		        	It is advisable that either a consecutive numbering (e.g.:rbmanager01, rbmanager02) or a name which identifies the role (e.g.: rbmanagermaster, rbmanagerslave01, rbmanagerslave02) be used.</para>
		        </note>
		        <para>Once these values have been entered, the system will notify you that the changes have successfully been applied with the following message appearing in green: <literal>DNS and domain settings applied successfully.</literal></para>
		        <para><emphasis role="bold">Creating bondings</emphasis></para>
		        <para> The next step is to indicate the time server: <literal> NTP server [pool.ntp.org]:</literal> If there is an NTP server in your network, it must be indicated. Otherwise, one will be assigned by default.</para>
		        <para>The system will then ask you to enter the management IP: <literal>Insert management IP address:</literal></para>
		        <mediaobject>
		        	<imageobject>
		        		 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img005.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Configuration of the Manager with Simple Wizard</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Configuration of the Manager with Simple Wizard: insert the management IP address of the Manager</para>
		        	</caption>
		        </mediaobject>
		        <warning>
		        	<title>Warning</title>
		        	<para>In order to create a cluster, the user must reserve two bondings: 
		        	one for the management network <emphasis role="bold">(Management IP address)</emphasis> and another for the synchronization network <emphasis role="bold">(Sync IP address).</emphasis></para>
		        </warning>
		        <para>To create a bonding the elements indicated below must be specified. 
		        To accept the default values, you only need to press the <keycap>Enter</keycap> key. Otherwise, enter the new values manually.</para>
		        <itemizedlist mark="bullet">
		        	<listitem>
		        		<para><literal>Insert management Netmask</literal></para>
		        	</listitem>
		        	<listitem>
		        		<para><literal>Insert default gateway for this management interface (Y/n):</literal></para>
		        		<para>The default option appears in capital letters. Remember that if you want to add this gateway you only need to press the <keycap>Enter</keycap> key.</para>
		        		<para>If you want to insert a new gateway for this management interface, type <keycap>n</keycap>.</para>
		        	</listitem>
		        	<listitem>
		        		<para><literal>Insert default gateway</literal></para>
		        	</listitem>
		        	<listitem>
		        		<para><literal>Insert a route for this bonding (y/N)?:</literal></para>
		        		<para>Press <keycap>y</keycap> to insert a new route for the bonding.</para>
		        	</listitem>		
		        </itemizedlist>
		        <para>Once theses values have been entered, the system will notify that the bonding has been created successfully with the folowing message appearing in green: <literal>Bonding 0 created successfully.</literal></para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img006.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Creating a bonding: insert synchronization IP</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Installing the Manager with Simple Wizard: Creating a bonding and inserting synchronism IP</para>
		        	</caption>
		        </mediaobject>
		        <para><emphasis role="bold">Creating a new synchronism bonding for adding a new Manager to the cluster</emphasis></para>
		        <para>For the creation of a new bonding we must indicate the IP and the sync mask as well as a route for the new bonding.</para>
		        <para> Once these values have been entered, the system will notify that the bonding has been created successfully: <literal>Bonding 1 created successfully.</literal></para>
		        <para>The following question will appear next: <literal>Would you like to join to another cluster (y/N)?</literal> 
		        Insertar <keycap>y</keycap> to continue with the joining process of a new Manager to the cluster.</para>
		        <warning>
		        	<title>Warning</title>
		        	<para>During the installation of the first Manager, the question <literal>Would you like to join to another cluster (y/N)?</literal> 
		        	This is not applicable, and so the option <keycap>N</keycap> will appear by default.</para>
		        </warning>
		        <mediaobject>
		        	<imageobject>
		        		 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img007.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Creating a synchorization bonding for joining a Manager to the cluster</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Installation of Manager with Simple Wizard: creating a synchronization bonding to join a Manager to the cluster</para>
		        	</caption>
		        </mediaobject>
		        <para><emphasis role="bold">Sincronization with storage databases</emphasis></para>
		        <para>At this point we must indicate the cluster domain to the system. By default the domain entered previously is indicated.</para>
		        <mediaobject>
		        	<imageobject>
		        		 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img014.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Domain which the cluster belongs to</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Installing a Manager with Simple Wizard: domain which the cluster belongs to</para>
		        	</caption>
		        </mediaobject>
		        <para><emphasis role="bold">Syncronization with databases and storage</emphasis></para>
		        <para>At this point we must indicate to the system how the databases and data storage are going to be managed in the Manager. 
		        As can be seen in the screenshot, in all cases the option <keycap>N</keycap> appears by default. And so, it is advisable that it be the Manager takes care of this. 
		        Otherwise, select the option <keycap>y</keycap> for the following cases:</para>
		        <para><literal>Would you like to use remote S3 storage? (y/N).</literal> Indicate if the Amazon Web Services (AWS) protocol is being used to transfer files.</para>
		        <para><literal>Would you like to use remote memcached? (y/N).</literal> Select if you want to implement caching of the databases. </para>
		        <para><literal>Would you like to use remote postgresql database? (y/N).</literal> Management with postgresql databases.</para>
		        <para>Once the chosen option has been indicated, we must confirm that we want to apply the configuration: <literal>Are you sure you want to apply this configuration? (y/N)</literal></para>
		        <para>Select the option <keycap>y</keycap>.</para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img008.png"/>
		             </imageobject>
		             <textobject>
		        		<phrase>Database options</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Installation of a Manager with Simple Wizard: database options</para>
		        	</caption>
		        </mediaobject>
		        <para>From this moment, the services will be installed. This process may take several minutes. Once the installation is done, the wizard will return you to the main screen of the redborder configuration menu.</para>
		        <para>To exit the wizard, select the option <keycap>q)</keycap> <literal>quit.</literal></para>
		    </section>
		</section>
	</section>
	<section>
		<title>Installation and joining of a new Manager to the cluster</title>
		<para>To install a second Manager, it is necessary to launch the ISO image again to begin the process; 
		the first steps are identical to those described previously for the installation of the Manager.</para>
		<note>
			<title>Note</title>
			<para>On the main screen of the Manager installation wizard, you will find the option <literal>Memory Test</literal> 
			useful for reviewing the state of the machine's memory before beginning with the installation of the second Manager.</para>
		</note>
		<para>Select <literal>Install Manager</literal> to begin with the installation process.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img013.png"/>
			</imageobject>
			<textobject>
				<phrase>Main screen of the redborder Manager installation wizard</phrase>
			</textobject>
			<caption>
				<para>Main screen of the redborder Manager installation wizard</para>
			</caption>
		</mediaobject>
		<para>After adjusting the basic settings and installing the packets, the system will restart automatically.
		 Then, log in, enter Password and the command <literal>rb_sysconf</literal> to access the main page of the redborder configuration menu.</para>		
		<note>
			<title>Note</title>
			<para>The password selected in this case may be different than that indicated for the first Manager. However, it is advised that the passwords be the same to avoid confusion.</para>
		</note>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img015.png"/>
			</imageobject>
			<textobject>
				<phrase>Installing a new Manager and joining to the cluster</phrase>
			</textobject>
			<caption>
				<para>Installing a new Manager and joining to the cluster</para>
			</caption>
		</mediaobject>
		<para>Select the option <keycap>w)</keycap><literal>start simple wizard</literal> to begin the installation process of a second Manager.</para>
		<para>The installation process of this additional Manager is identical to that employed for the installation of the master Manager. On the following screens you will see that the same elements are present:</para>
		<itemizedlist mark="circle">
			<listitem>
				<para>Hostname</para>
			</listitem>
			<listitem>
				<para>Domain</para>
			</listitem>
			<listitem>
				<para>Primary DNS (may be different from that of the primary Manager)</para>
			</listitem>
			<listitem>
				<para>Secondary DNS</para>
			</listitem>
			<listitem>
				<para>NTP server</para>
			</listitem>		
		</itemizedlist>
		<important>
			<title>Important</title>
			<para>It is important that different names be used for each on of the Managers that is going to be joined to the cluster. 
			It is most advisable to follow a consecutive numbering (e.g.:rbmanager01, rbmanager02) or a name which identifies the role (e.g.: rbmanagermaster, rbmanagerslave01, rbmanagerslave02).</para> 
		</important>
		<para>The following step is the creation of the two bondings: management (bonding 0) and synchronization (bonding 1). 
		Indicate (or select the default value) the following values:</para>
		<itemizedlist mark="circle">
			<listitem>
				<para>(Management/sync) IP address</para>
			</listitem>
			<listitem>
				<para>(Management/sync) Netmask</para>
			</listitem>
			<listitem>
				<para>Gateway for the management interface (<literal>Default gateway for this management interface (Y/n)?:</literal>)</para>
			</listitem>
			<listitem>
				<para>Bonding route (<literal>Insert a route for this bonding (y/N)?</literal>)</para>
			</listitem>
		</itemizedlist>
		<para>Once these values have been entered, the wizard will confirm that the bondings 0 and 1 have been created successfully: <literal>Bonding created successfully.</literal></para>
		<warning>
			<title>Warning</title>
			<para>The Managers' management networks, as well as the synchronization networks, must be connected to one another in order to operate as a cluster. </para>
		</warning>
		<mediaobject>
			<imageobject>
				 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img016.png"/>
		    </imageobject>
		    <textobject>
				<phrase>Installation of a new Manager and joining to the cluster: bondings</phrase>
			</textobject>
			<caption>
				<para>Installation of a new Manager and joining to the cluster: bondings</para>
			</caption>
		</mediaobject>
		<para>In this case, with the question <literal>Would you like to join other cluster? (y/N);</literal> select the option <keycap>y</keycap>.</para>
		<para>The next piece of information that must be entered is the cluster synchornization IP: <literal>Cluster SYNC IP Adress (bond1):</literal> 
		which corresponds to the synchronization (or bonding) IP of the first Manager or Master. </para>
		<mediaobject>
			<imageobject>
				 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img011.png"/>
		    </imageobject>
		    <textobject>
				<phrase>Enter the synchronization IP to join to the cluster</phrase>
			</textobject>
			<caption>
				<para>Installation of a new Manager and joining to the cluster: enter the synchorization IP to going to the cluster</para>
			</caption>
		</mediaobject>
		<note>
			<title>Note</title>
			<para>En caso de que su equipo utilice DHCP, estas configuraciones se realizarán de manera automática.</para>
		</note>
		<para>Antes de aplicar esta configuración, seleccionar el tipo de servicio que va a asumir cada manager. En la siguiente pantalla podrá visualizar todas las opciones disponibles: </para>
		<mediaobject>
			<imageobject>
				 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img012.png"/>
		    </imageobject>
		    <textobject>
				<phrase>Seleccionar servicios para cada uno de los Managers</phrase>
			</textobject>
			<caption>
					<para>Instalación de nuevo Manager y unión al cluster: seleccionar modo para el nuevo Manager</para> <!--Revisar conceptos manager/esclavo-->
			</caption>
		</mediaobject>
		<note>
			<title>Nota</title>
			<para>En caso de no seleccionar ninguna opción, el sistema atribuirá al nuevo Manager la opción <literal>1) slave</literal> por defecto.</para>
			<para>Se recomienda seleccionar el rol de esclavo al nuevo Manager ya que, de este modo, ambos Managers se reparten los servicios.</para>
		</note>	
		<para>¡Enhorabuena! Ha instalado correctamente el Manager redborder Enterprise Version. A partir de este momento, puede realizar la configuración y gestión del Manager, 
		de las Apps y sus sensores desde la plataforma web redborder.</para>
		<para>En los capítulos siguientes encontrará el procedimiento para el registro de los sensores IPS y Mail Gateway para redborder Malware. </para>
	</section>
</chapter>
