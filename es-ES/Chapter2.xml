<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "manual.ent">
<!ENTITY PRODUCT "Documentation">
<!ENTITY BOOKID "manual">
<!ENTITY YEAR "2016">
<!ENTITY HOLDER "Eneo Tecnología S.L. |">
]>
<chapter>
	<title>Instalación del Manager de redborder versión Enterprise</title>
	<para>Gracias a una instalación asistida, configurar y preparar el Manager se realiza de una forma rápida y sencilla sin necesidad de tener conocimientos específicos 
	de administración de Linux. A continuación se describen los requisitos y recomendaciones del escenario para la correcta instalación del Manager para redborder Malware.</para> 
	<section>
		<title>Escenario básico para la instalación de redborder Malware</title>
		<para>Un escenario de ejemplo propuesto para la solución consiste en un conjunto de sensores dispuestos en diferentes puntos sensibles de la red de
		 la organización que conectarán con un Manager o cluster de managers para su gestión y monitorización.</para>
		<para>En el caso de la implantación de la release 1 de redborder Malware se trata de un escenario sencillo puesto que no presenta mecanismos de alta disponibilidad, ni balanceo, routing, etc., 
		pero que permite validar una serie de casos de uso de aplicación real.</para>
		<para>Para la planificación de la instalación de los sensores, se deberán tener en cuenta algunos aspectos fundamentales:</para> 
		<itemizedlist mark="circle">
			<listitem>
				<para><emphasis role="bold">Segmentos bypass:</emphasis> son interfaces específicas de red pareadas que disponen de soporte bypass. Estas interfaces se situarán en medio del tráfico a analizar.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">Interfaces de gestión:</emphasis> son interfaces de red para la comunicación entre los managers, sensores, equipos externos, etc.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">Interfaces de sincronismo:</emphasis> son interfaces de red para la comunicación interna de servicios entre los managers del cluster.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">Interfaces de acceso IPMI:</emphasis> son interfaces de red que se usan exclusivamente para la gestión remota del hardware. Algunos ejemplos de uso son: 
				conexiones SOL ó Serial Over Lan, iKVM, comandos IPMI tales como inicio, reinicio y apagado, etc.</para>
			</listitem>
		</itemizedlist>
		<para>Para el <emphasis role="bold">Manager</emphasis> la única condición en cuanto a equipamiento de red es <emphasis role="bold">la existencia, al menos, de una interfaz de red. </emphasis></para>
		<para>redborder no utiliza directamente interfaces de red físicas sino que crea un sistema de interfaces lógicas denominadas bonding que operan sobre dichas interfaces de red físicas.</para>
		<para>De esta manera se creará un bonding para la gestión y conexión con los sensores y, en caso de existir, otro bonding para sus comunicaciones hacia otras redes. 
		Ambos sistemas soportan el estándar 802.1q para virtual LAN (opcional a la hora de configurar).</para>
		<warning>
			<title>Advertencia</title>
			<para>Es MUY IMPORTANTE que se realice la configuración del Manager (o cluster de managers) antes de configurar los sensores.</para>
			<para>El Manager debe estar operativo y en una red accesible a los sensores. Algunos de los procesos de configuración de los sensores dependen del acceso al Manager. 
			<footnote><para>El escenario de instalación del Manager redborder es el mismo independientemente de los sensores que se instalen y registren en el mismo.</para></footnote>.</para>
		</warning>
		<para>El escenario que se propone como ejemplo para esta primera release está formado por una red conmutada compuesta por cinco elementos importantes:</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para><emphasis role="bold">redborder Manager:</emphasis></para>
				<para>Elemento central en el cual se recibe, se trata y se visualiza toda la información emitida por los diferentes sensores. 
				Desde la plataforma web redborder se pueden configurar ciertos aspectos de los sensores.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder IDS:</emphasis></para>
				<para>Sensor por el que pasa el tráfico de red para ser analizado. Configurado en modo IDS es capaz de detectar patrones de tráfico correspondientes a posibles ataques y/o Malware. 
				Una vez registrado en el Manager, le envía los resultados así como los ficheros detectados.  Las reglas utilizadas para el análisis serán gestionadas desde la plataforma web redborder.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder Mail Gateway:</emphasis></para>
				<para>Sensor por el cual pasa el tráfico de correo (SMTP). Funciona como un sencillo MTA (Mail Traffic Agent). Cada vez que el sensor recibe un email lo reenvía al servidor de correo correspondiente. 
				Por otra parte, envía también al Manager una copia de los emails y sus adjuntos incluyendo datos adicionales. Este sensor debe ser registrado en el Manager para su correcto funcionamiento.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder Proxy ICAP:</emphasis></para>
				<para>El servidor Proxy ICAP garantiza al usuario una monitorización completa de las interacciones que se están produciendo dentro de su red.</para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">redborder EndPoint:</emphasis></para>
				<para>El servicio EndPoint ha sido diseñado para la monitorización y análisis de la actividad de los equipos/sistemas 
				que forman parte de la infraestructura de red de una compañía y que serán analizados mediante la App redborder Malware.</para>
			</listitem>
		</itemizedlist>
		<warning>
			<title>Advertencia</title>
			<para>El escenario correspondiente a esta release se ha modificado para que los emails no sean reenviados a otro servidor de correo.</para>	
		</warning>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img001.png"/>
			</imageobject>
			<caption>
				<para>Escenario básico redborder Malware</para>
			</caption>
		</mediaobject>		    
	</section>
	<section>
		<title>Iniciando la instalación del Manager para redborder Malware</title>
		<para>Para la instalación del Manager, el usuario dispondrá de una <emphasis role="bold">imagen ISO</emphasis> obtenida mediante descarga desde la página oficial de redborder. 
		La imagen ISO se encuentra preparada para la instalación tanto en máquina física como en máquina virtual ya sea el medio de instalación un DVD o una unidad USB. En cualquier caso, una vez realizada la primera fase 
		de la instalación, el sistema se reiniciará y arrancará desde la opción definida por defecto: <literal>Select from local disk.</literal></para>
		<para>Al arrancar el asistente de instalación tendrá acceso a un menú en el que encontrará las siguientes opciones:</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para><literal>Install Manager:</literal> lanza el menú de instalación del Manager.</para>
			</listitem>
			<listitem>
				<para><literal>Install Sensor:</literal> esta opción le permite realizar la instalación y configuración del sensor. <footnote><para>Dependiendo de la solución que haya adquirido aparecerán en el menú las diferentes 
				opciones para la instalación y registro de los sensores de las diferentes Apps en el Manager: IPS sensor y/o Gateway Sensor.</para>
				</footnote></para>
			</listitem>
			<listitem>
				<para><literal>Rescue installed system:</literal> modalidad de inicio de rescate para los casos en que existan problemas de inicio de su máquina (modo avanzado). Además, permite iniciar el procedimiento de resolución del problema o cambiar la contraseña del usuario en caso de pérdida.</para>
			</listitem>
			<listitem>
				<para><literal>Boot from Local Drive:</literal> arranque desde disco local (por defecto).</para>
			</listitem>
			<listitem>
				<para><literal>Memory Test:</literal> testeo de memoria disponible para la instalación del sistema. En caso de que algún módulo de memoria se encuentre defectuoso, esta prueba lo detectará y avisará de ello al usuario.</para>
			</listitem>
		</itemizedlist>
		<note>
			<title>Nota</title>
			<para>Es aconsejable revisar el estado de la memoria de la máquina antes de comenzar la instalación el segundo Manager.</para>
		</note>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img001.png"/>
			</imageobject>
			<textobject>
				<phrase>Pantalla principal de arranque del medio de instalación del Manager de redborder</phrase>
			</textobject>
				<caption>
					<para>Pantalla principal del asistente de instalación del Manager redborder</para>
				</caption>
		</mediaobject>
		<section>
			<title>Estructura y operativa de los menús del asistente de instalación redborder</title>
			<para><emphasis role="bold">Menú, submenú y línea de comandos</emphasis></para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img002.png"/>
				</imageobject>
				<textobject>
					<phrase>Estructura y operativa de los menús del asistente de instalación redborder</phrase>
				</textobject>
				<caption>
					<para>Estructura y operativa de los menús del asistente de instalación redborder</para>
				</caption>
			</mediaobject>
			<para><emphasis>Menú</emphasis></para>
			<para>En el margen izquierdo de la pantalla encontrará un listado con las opciones disponibles. Para seleccionar cualquiera de ellas solo debe introducir en la línea en la que figura <literal>Selection</literal>, el número o letra que corresponda a la opción que desea elegir.</para>
			<para><emphasis>Submenú</emphasis></para>
			<para>En caso de que sobre la opción seleccionada se puedan realizar diferentes acciones, aparecerá un submenú en el margen derecho de la pantalla.</para>
			<para><emphasis>Línea de comandos / selector de opciones</emphasis></para>
			<para>En el margen superior, y separado del menú y submenú gráficamente, encontramos el área en el que se deberán indicar las selecciones en la línea en la que figura <literal>Selection</literal> e introducir los comandos o datos que se soliciten para ejecutar las acciones pertinentes. En esta zona visualizaremos la fecha y la hora del sistema (por defecto en UTC).</para>
		</section>
		<section>
			<title>Selección de opciones</title>
			<para><emphasis role="bold">Opciones predeterminadas</emphasis></para>
			<para>En algunos casos, el sistema mostrará una serie de opciones predeterminadas. Si se trata de la respuesta a una pregunta, la opción definida por defecto se visualizará en mayúsculas.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img003.png"/>
				</imageobject>
				<caption>
					<para>Selección de opciones predeterminadas</para>
				</caption>
			</mediaobject>
			<para><emphasis role="bold">Opciones disponibles en el menú del asistente de instalación de redborder</emphasis></para>
			<itemizedlist mark="bullet">
				<listitem>
					<para>Selección de opción por defecto: pulse <keycap>Enter.</keycap></para>
				</listitem>
				<listitem>
					<para>Otras opciones: introduzca la letra o comando que corresponda.</para>
				</listitem>
				<listitem>
					<para>Salir: cuando quiera salir de una pantalla para regresar al menú inicial seleccione la opción <literal>quit</literal>, introduciendo la letra <keycap>q.</keycap></para>
				</listitem>
				<listitem>
					<para>Aplicar cambios: para guardar las modificaciones realizadas y aplicar los cambios, seleccione la opción <literal>apply</literal> introduciendo la letra <keycap>a.</keycap></para>
				</listitem>
			</itemizedlist>
			<mediaobject>
				<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img004.png"/>
				</imageobject>
				<caption>
					<para>Opciones disponibles en el  menú del asistente de instalación de redborder</para>
				</caption>
			</mediaobject>
			<warning>
				<title>Advertencia</title>
				<para><literal>Need to "apply" to activate changes</literal></para>
				<para>Si visualiza este mensaje deberá seleccionar la opción <keycap>a</keycap>. En caso contrario, el sistema no guardará ni aplicará las modificaciones realizadas.</para>
			</warning>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch01_img005.png"/>
				</imageobject>
				<caption>
					<para>Aplicar cambios para aplicar las modificaciones</para>
				</caption>
			</mediaobject>
		</section>
	</section>
    <section>
		<title>Proceso de instalación del Manager</title>
		 <para>El proceso de instalación del Manager está preparado para realizar instalaciones desatendidas. Si en algún momento se quiere realizar algún cambio durante el proceso de instalación habría que modificar los
		 valores por defecto.</para>
		 <warning>
			<title>Advertencia</title>
			<para>Existe un tiempo limitado para poder modificar los valores que el instalador genera por defecto. Se aconseja tener claro los valores antes de alcanzar este paso de la instalación.</para>
		</warning>
		 <para>El proceso de instalación del manager interacciona con el usuario para identificar dos parámetros:</para>
		 <itemizedlist>
			<listitem>
				<para><emphasis>Selección de la unidad de destino de la instalación</emphasis></para>
			</listitem>
			<listitem>
				<para><emphasis>Inserción y confirmación del password de root</emphasis></para>
			</listitem>
		</itemizedlist>   
		<para>Seleccione <literal>Install Manager</literal> para comenzar el proceso de instalación del Manager.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img013.png"/>
			</imageobject>
			<textobject>
					<phrase>Iniciando el proceso de instalación</phrase>
				</textobject>
				<caption>
					<para>Iniciando el proceso de instalación</para>
				</caption>
		</mediaobject>
		<para>A continuación se procederá a la realización de una serie de ajustes básicos:</para>
		<para><emphasis role="bold">a) Seleccione el destino donde se instalará el manager de redborder</emphasis></para>
		<para>Seleccione la unidad de almacenamiento donde se instalará el manager de redborder.</para> 
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002a.png"/>
			</imageobject>
			<textobject>
					<phrase>Ajustes básicos: selección de unidad de almacenamiento destino de la instalación</phrase>
				</textobject>
				<caption>
					<para>Ajustes básicos: selección de unidad de almacenamiento destino de la instalación</para>
				</caption>
		</mediaobject>
		<para><emphasis role="bold">b) Inserción y confirmación de la contraseña de root</emphasis></para>
		<para><emphasis>Insertar contraseña de root (Enter root password):</emphasis> Esta será la clave con la que opere a partir de ahora. Puede ser modificada en cualquier otro momento.</para>
		<para><emphasis>Confirmar contraseña de root (Confirm root password):</emphasis> Volver a introducir la clave para verificar que la conoce y que no ha cometido ningún error tipográfico.</para>
		<note>
			<title>Nota</title>
			<para>Recuerde que la contraseña que haya seleccionado en este paso, será la que utilice para acceder tanto a la plataforma web redborder como al sistema con el usuario admin y root respectivamente.</para>
			<para>La contraseña que se crea ante la ausencia de interacción por parte del usuario es: redborder.</para>
		</note>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002b.png"/>
			</imageobject>
			<textobject>
					<phrase>Ajustes básicos: contraseña de root</phrase>
			</textobject>
			<caption>
				<para>Ajustes básicos: contraseña de root</para>
			</caption>
		</mediaobject>
		<para>A continuación el sistema procederá a crear las particiones y a realizar la instalación de los paquetes del asistente en la unidad seleccionada.</para>
		<para><emphasis role= "bold">Instalación de los paquetes y reinicio del sistema</emphasis></para>
		<para>Una vez que se ha procedido con los pasos anteriores, la instalación continuará con la instalación de los paquetes de software en el disco duro.</para>
		<para>Espere hasta que la barra de progreso le indique que la instalación se ha completado al 100%. Este proceso puede durar unos minutos.</para>
		<para>No pulse ninguna tecla ni realice ninguna acción hasta que finalice el proceso.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002d.png"/>
			</imageobject>
			<textobject>
				<phrase>Instalación de los paquetes</phrase>
			</textobject>
			<caption>
				<para>Instalación de los paquetes</para>
			</caption>
		</mediaobject>
		<para>Una vez instalados los paquetes, el programa ejecuta los últimos scripts para finalizar esta etapa. Estos últimos scripts pueden durar unos minutos dependiendo de la capacidad de la máquina. A continuación, 
		deberá reiniciarse el sistema de forma automática dando por finalizada la instalación.</para>	
	</section>
    <section>
		<title>Primer arranque del Manager de redborder</title>
		<para>Tras el reinicio automático, posterior a la instalación, el sistema realizará una serie de ajustes en la configuración durante el primer inicio. En este proceso de configuración el sistema tratará de detectar,
		entre otros ajustes, la configuración de las interfaces de red. Existen dos opciones dependientes de la existencia o no de un servidor DHCP.</para>
		<section>
			<title>Configuración DHCP</title>
			<para>En este caso existe al menos un servidor DHCP que ha asignado direcciones IP a las interfaces de red del Manager. El Manager se encuentra listo 
			y operativo para su labor, no es necesario configurar nada adicional.</para>
			<para>Así mismo, si existen varios manager con direcciones IP asignadas por DHCP, al realizar el primer inicio se descubriran los unos a los otros provocando la creación automática del cluster. Cuando se forma
			el cluster de forma automática los nombres de host se generan de forma aleatoria.</para>
		</section>
		<section>
			<title>Configuración manual de red</title>
			<para>En este caso las interfaces de red no tienen asignadas ninguna dirección IP por lo que será necesario realizar la configuración del Manager de forma manual.</para>
		    <para>Una vez realizada el proceso del primer arranque, aparecerá la pantalla ingreso en el sistema. Ingresaremos con el usuario <literal>root</literal> y la contraseña que se haya creado durante el proceso 
		    de instalación</para>	
		    <mediaobject>
		    	<imageobject>
		    		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img002e.png"/>
		    	</imageobject>
		    	<textobject>
		    			<phrase>Pantalla de login</phrase>
		    		</textobject>
		    		<caption>
		    			<para>Pantalla de login</para>
		    		</caption>
		    </mediaobject>
		    <note>
		    	<title>Nota</title>
		    	<para>Para realizar la configuración del Manager es necesario registrarse con el usuario que tiene mayores permisos: <emphasis>root</emphasis></para>
		    </note>	
		    <para>Para proceder a finalizar la configuración del Manager ejecutaremos el comando <emphasis role="bold">rb_sysconf</emphasis> para lanzar el <literal>redborder Configuration menu.</literal> 
		    (En adelante: menú de configuración redborder)</para>
		    <para>A continuación tenemos 2 vías para finalizar la configuración del Manager de redborder: manualmente o ejecutando un asistente de configuración.</para>
		    <important>
		       	<title>Importante</title>
		       	<para>Los pasos que aquí se van a seguir son los que corresponden a la instalación de un Manager desde cero al que se le va a unir otro Manager en cluster.</para>
		       	<para>En caso de que ya haya instalado un Manager, no será necesario repetir la puesta en red del mismo. Tan solo tendrá que realizar la puesta en red del nuevo Manager que se va a unir al cluster. 
		       	El usuario podrá realizar de manera manual la configuración del resto de parámetros del sistema mediante la selección de la opción <keycap>1)</keycap><literal>System configuration</literal> en el menú 
		      	de configuración redborder.</para>
		    </important>
		    <section>
				<title>Configuración manual</title>
				<para>Este método de configuración no se encuentra contemplado en este manual de uso dada su complejidad. Se recomienda encarecidamente el uso del asistente de configuración.</para>
		    </section>
		    <section>
				<title>Uso del asistente de configuración: Start simple wizard </title>
				<para>Al ejecutar el comando <emphasis role="bold">rb_sysconf</emphasis> apareceran, en forma de menú, las opciones que se detallan a continuación: </para>
		        <para><literal>1) System Configuration:</literal> configuración del hostname, IP del Manager, hora y estado del Manager.</para>
		        <para><literal>2) Network Configuration:</literal> creación de bondings, segmentos, DNS, rutas e IPMI.</para>
		        <para><literal>3) Passwords:</literal> acceda a esta opción si desea modificar las contraseñas que haya definido por cada rol de usuario.</para>
		        <para><literal>w) start simple wizard:</literal> inicia un asistente que le permitirá de forma sencilla y rápida realizar la instalación y configuración del Manager.</para>
		        <para><literal>q) quit:</literal> Salir. Nos devuelve a la pantalla principal de configuración del sistema.</para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img003.png"/>
		            </imageobject>
		            <textobject>
		        			<phrase>Pantalla principal del asistente de instalación del menú de configuración redborder</phrase>
		        		</textobject>
		        		<caption>
		        			<para>Pantalla principal del asistente de instalación del menú de configuración redborder</para>
		        		</caption>
		        </mediaobject>
		   	    <para>Para realizar la instalación automática del Manager existe la opción <keycap>w)</keycap><literal>start simple wizard</literal> que se encuentra en el submenú del menú de configuración redborder. Esta opción 
		   	    facilita el proceso de configuración para la instalación de un Manager o para la unión de dos o más managers formando un cluster.</para>
		        <para>Como podrá comprobar, existen una serie de opciones definidas por defecto. Para aceptarlas tan solo tiene que pulsar<keycap> Enter.</keycap> 
		        No obstante, puede modificarlas manualmente en cualquier momento del proceso de instalación.</para>
		        <para><emphasis role="bold">Mode, Hostname y DNS</emphasis></para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img004.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Instalación mediante simple wizard</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Instalación mediante simple wizard: insertar Hostname, dominio, DNS primaria, DNS secundaria y NTP del servidor</para>
		        	</caption>
		        </mediaobject>
		        <orderedlist numeration="arabic">
		        		<listitem>
		        			<para><literal>Selected Mode: single.</literal> Es el modo de funcionamiento del Manager. Cuando el Manager se encuentre unido a otro formando un cluster, automáticamente cambiará a modo cluster.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert Hostname [rbmanager]:</literal> la opción que viene definida por defecto es la de <literal>rbmanager.</literal> 
		        			Este es un nombre que identifica de manera clara y sencilla al Manager y su posición dentro del cluster.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert domain: [redborder.cluster]</literal> dominio definido por defecto.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert DNS Primary:</literal> es necesario indicar el servidor que provee DNS a su red y al que estará asociado el Manager.</para>
		        		</listitem>
		        		<listitem>
		        			<para><literal>Insert DNS Secondary (optional):</literal> indicar DNS secundario de manera opcional. Se aconseja introducir un DNS alternativo que sustituya al DNS primario en caso de fallo .</para>
		        		</listitem>
		        </orderedlist>
		        <note>
		        	<title>Nota</title>
		        	<para>Es importante que se utilicen diferentes nombres para cada uno de los Managers que se van a unir al cluster. 
		        	Lo aconsejable es seguir una numeración consecutiva (ej.:rbmanager01, rbmanager02) o bien, algún nombre que identifique su rol (ej.: rbmanagermaster, rbmanagerslave01, rbmanagerslave02).</para>
		        </note>
		        <para>Una vez introducidos estos valores, el sistema le avisará de que los cambios han sido aplicados con éxito mediante el siguiente mensaje rotulado en verde: <literal>DNS and domain settings applied successfully.</literal></para>
		        <para><emphasis role="bold">Creación de bonding</emphasis></para>
		        <para> El siguiente paso es indicar el servidor de tiempo: <literal> NTP server [pool.ntp.org]:</literal> Si existe algún NTP server en su red, se debe indicar. En caso contrario, se asignará uno por defecto.</para>
		        <para>A continuación, el sistema le pedirá que introduzca la IP de gestión: <literal>Insert management IP address:</literal></para>
		        <mediaobject>
		        	<imageobject>
		        		 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img005.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Configuración del Manager mediante Simple Wizard</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Instalación del Manager mediante Simple Wizard: insertar la IP de gestión del Manager</para>
		        	</caption>
		        </mediaobject>
		        <warning>
		        	<title>Advertencia</title>
		        	<para>Para la creación de un cluster es necesario que el usuario reserve dos bondings: 
		        	uno para la red de gestión <emphasis role="bold">(Management IP address)</emphasis> y otro para la red de sincronismo <emphasis role="bold">(Sync IP address).</emphasis></para>
		        </warning>
		        <para>Para la creación de un bonding deberán especificarse los elementos que se indican a continuación. 
		        Para aceptar los valores definidos por defecto basta con pulsar la tecla <keycap>Enter.</keycap> En caso contrario, introducir manualmente los nuevos valores.</para>
		        <itemizedlist mark="bullet">
		        	<listitem>
		        		<para><literal>Insert management Netmask</literal></para>
		        	</listitem>
		        	<listitem>
		        		<para><literal>Insert default gateway for this management interface (Y/n):</literal></para>
		        		<para>La opción que viene predeterminada aparece en mayúscula. Recuerde que si desea añadir esta pasarela tan solo tiene que pulsar la tecla <keycap>Enter</keycap>.</para>
		        		<para>En caso de que desee insertar una nueva pasarlela para esta interfaz de gestión, teclee <keycap>n</keycap>.</para>
		        	</listitem>
		        	<listitem>
		        		<para><literal>Insert default gateway</literal></para>
		        	</listitem>
		        	<listitem>
		        		<para><literal>Insert a route for this bonding (y/N)?:</literal></para>
		        		<para>Pulsar <keycap>y</keycap> para insertar una nueva ruta para el bonding.</para>
		        	</listitem>		
		        </itemizedlist>
		        <para>Una vez introducidos estos valores, el sistema le avisará de que el bonding ha sido creado con éxito mediante el siguiente mensaje rotulado en verde: <literal>Bonding 0 created successfully.</literal></para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img006.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Creación de bonding: insertar IP de sincronismo</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Instalación de Manager mediante Simple Wizard: Creación de bonding e inserción IP de sincronismo</para>
		        	</caption>
		        </mediaobject>
		        <para><emphasis role="bold">Creación de un nuevo bonding de sincronismo para la unión de un nuevo Manager al cluster</emphasis></para>
		        <para>Para la creación de un nuevo bonding deberemos indicar la IP y la máscara de sincronismo e indicar una ruta para el nuevo bonding.</para>
		        <para> Una vez que haya introducido estos valores, el sistema le avisará de que el nuevo bonding ha sido creado con éxito: <literal>Bonding 1 created successfully.</literal></para>
		        <para>A continuación le aparecerá la siguiente pregunta: <literal>Would you like to join to other cluster (y/N)?</literal>, 
		        insertar <keycap>y</keycap> para continuar con el proceso de unión de un nuevo Manager al cluster.</para>
		        <warning>
		        	<title>Advertencia</title>
		        	<para>Durante la instalación del primer Manager, la pregunta <literal>Would you like to join to other cluster (y/N)?</literal> 
		        	no aplica, por lo que aparecerá la opción <keycap>N</keycap> definida por defecto.</para>
		        </warning>
		        <mediaobject>
		        	<imageobject>
		        		 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img007.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Creación de bonding de sincronismo para la unión de un Manager al cluster</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Instalación de Manager mediante Simple Wizard: creación de bonding de sincronismo para la unión de un Manager al cluster</para>
		        	</caption>
		        </mediaobject>
		        <para><emphasis role="bold">Sincronización con bases de datos y almacenamiento</emphasis></para>
		        <para>En este punto deberemos indicarle al sistema el dominio del cluster. Por defecto se indica el dominio que se ha introducido anteriormente.</para>
		        <mediaobject>
		        	<imageobject>
		        		 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img014.png"/>
		            </imageobject>
		            <textobject>
		        		<phrase>Dominio al que pertenete el cluster</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Instalación de Manager mediante Simple Wizard: dominio al que pertenece el cluster</para>
		        	</caption>
		        </mediaobject>
		        <para><emphasis role="bold">Sincronización con bases de datos y almacenamiento</emphasis></para>
		        <para>En este punto deberemos indicarle al sistema cómo se van a gestionar las bases de datos y el almacenamiento de datos en el Manager. 
		        Como se observará en la captura de pantalla, en todos los casos la opción <keycap>N</keycap> aparece definida por defecto. Se aconseja, por tanto que sea el Manager quien realice esta gestión. 
		        En caso contrario, seleccionar la opción <keycap>y</keycap> para los siguientes casos:</para>
		        <para><literal>Would you like to use remote S3 storage? (y/N).</literal> Indicar en caso de que se use el protocolo de Amazon Web Services (AWS) para transferencia de ficheros.</para>
		        <para><literal>Would you like to use remote memcached? (y/N).</literal> Seleccionar en caso de que se desee realizar el cacheo de las peticiones a bases de datos. </para>
		        <para><literal>Would you like to use remote postgresql database? (y/N).</literal> Gestión mediante base de datos postgresql.</para>
		        <para>Una vez que se haya indicado la opción elegida, deberemos confirmar que deseamos aplicar la configuración que hemos realizado: <literal>Are you sure you want to apply this configuration? (y/N)</literal></para>
		        <para>Seleccionar la opción <keycap>y</keycap>.</para>
		        <mediaobject>
		        	<imageobject>
		        		<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img008.png"/>
		             </imageobject>
		             <textobject>
		        		<phrase>Opciones de bases de datos</phrase>
		        	</textobject>
		        	<caption>
		        		<para>Instalación de Manager mediante Simple Wizard: opciones de bases de datos</para>
		        	</caption>
		        </mediaobject>
		        <para>A partir de este momento, se efectuará la instalación de los servicios. Este proceso puede llevar unos minutos. Una vez se haya realizado esta instalación, el asistente le devolverá a la pantalla principal del menú de configuración redborder.</para>
		        <para>Para salir del asistente, seleccionar la opción <keycap>q)</keycap> <literal>quit.</literal></para>
		    </section>
		</section>
	</section>
	<section>
		<title>Instalación y unión de un nuevo Manager al cluster</title>
		<para>Para la instalación de un segundo Manager es necesario volver a lanzar la imagen ISO para comenzar el proceso; los primeros pasos son idénticos a los descritos anteriormente para la instalación del Manager.</para>
		<note>
			<title>Nota</title>
			<para>En la pantalla principal del asistente de instalación del Manager encontrará la opción <literal>Memory Test</literal> aconsejable para revisar el estado de la memoria de la máquina antes de comenzar 
			la instalación el segundo Manager.</para>
		</note>
		<para>Seleccionar <literal>Install Manager</literal> para comenzar con el proceso de instalación.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img013.png"/>
			</imageobject>
			<textobject>
				<phrase>Pantalla principal del asistente de instalación del Manager redborder</phrase>
			</textobject>
			<caption>
				<para>Pantalla principal del asistente de instalación del Manager redborder</para>
			</caption>
		</mediaobject>
		<para>Tras realizar los ajustes básicos e instalación de los paquetes, el sistema se reiniciará de manera automática.
		 A continuación, hacer Login, insertar Password e introducir el comando <literal>rb_sysconf</literal> para acceder a la pantalla principal del menú de configuración redborder.</para>		
		<note>
			<title>Nota</title>
			<para>La password que seleccione en este caso puede ser diferente de la indicada para el primer Manager. No obstante, se aconseja unificar las contraseñas para evitar confusiones.</para>
		</note>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img015.png"/>
			</imageobject>
			<textobject>
				<phrase>Instalación de nuevo Manager y unión al cluster</phrase>
			</textobject>
			<caption>
				<para>Instalación de nuevo Manager y unión al cluster</para>
			</caption>
		</mediaobject>
		<para>Seleccione la opción <keycap>w)</keycap><literal>start simple wizard</literal> para comenzar el proceso de instalación de un segundo Manager.</para>
		<para>El proceso de instalación de este Manager adicional es idéntico al empleado para la instalación del Manager maestro. En las siguientes pantallas observará que se configuran los mismos elementos:</para>
		<itemizedlist mark="circle">
			<listitem>
				<para>Hostname</para>
			</listitem>
			<listitem>
				<para>Dominio</para>
			</listitem>
			<listitem>
				<para>DNS primario (puede ser diferente al del primer Manager)</para>
			</listitem>
			<listitem>
				<para>DNS secundario</para>
			</listitem>
			<listitem>
				<para>NTP server</para>
			</listitem>		
		</itemizedlist>
		<important>
			<title>Importante</title>
			<para>Es importante que se utilicen diferentes nombres para cada uno de los Managers que se van a unir al cluster. 
			Lo más aconsejable es seguir una numeración consecutiva (ej.:rbmanager01, rbmanager02) o bien, algún nombre que identifique su rol (ej.: rbmanagermaster, rbmanagerslave01, rbmanagerslave02).</para> 
		</important>
		<para>El siguiente paso es la creación de dos bonding: de gestión (bonding 0) y de sincronismo (bonding 1). Indicar (o seleccionar el valor dado por defecto) los siguientes valores:</para>
		<itemizedlist mark="circle">
			<listitem>
				<para>(Management/sync) IP address</para>
			</listitem>
			<listitem>
				<para>(Management/sync) Netmask</para>
			</listitem>
			<listitem>
				<para>Pasarela para la interfaz de gestión (<literal>Default gateway for this management interface (Y/n)?:</literal>)</para>
			</listitem>
			<listitem>
				<para>Ruta para el bonding (<literal>Insert a route for this bonding (y/N)?</literal>)</para>
			</listitem>
		</itemizedlist>
		<para>Una vez que se hayan introducido estos valores, el asistente confirmará que los bonding 0 y 1 han sido creados con éxito: <literal>Bonding created successfully.</literal></para>
		<warning>
			<title>Advertencia</title>
			<para>Las red de gestión de los Manager, así como las de sincronismo, deben tener conectividad entre sí para poder funcionar como cluster. </para>
		</warning>
		<mediaobject>
			<imageobject>
				 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img016.png"/>
		    </imageobject>
		    <textobject>
				<phrase>Instalación de nuevo Manager y unión al cluster: bondings</phrase>
			</textobject>
			<caption>
				<para>Instalación de nuevo Manager y unión al cluster: bondings</para>
			</caption>
		</mediaobject>
		<para>En este caso ante la pregunta <literal>Would you like to join other cluster? (y/N);</literal> seleccionar la opción <keycap>y</keycap>.</para>
		<para>El siguiente dato que tiene que ingresar es la IP de sincronismo del cluster: <literal>Cluster SYNC IP Adress (bond1):</literal> 
		La cual corresponde a la IP de sincronismo (o del bonding 1) del primer Manager o Maestro. </para>
		<mediaobject>
			<imageobject>
				 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img011.png"/>
		    </imageobject>
		    <textobject>
				<phrase>Introducir la IP de sincronismo para unión al cluster</phrase>
			</textobject>
			<caption>
				<para>Instalación de nuevo Manager y unión al cluster: introducir la IP de sincronismo para unión al cluster</para>
			</caption>
		</mediaobject>
		<note>
			<title>Nota</title>
			<para>En caso de que su equipo utilice DHCP, estas configuraciones se realizarán de manera automática.</para>
		</note>
		<para>Antes de aplicar esta configuración, seleccionar el tipo de servicio que va a asumir cada manager. En la siguiente pantalla podrá visualizar todas las opciones disponibles: </para>
		<mediaobject>
			<imageobject>
				 <imagedata scalefit="1" align="center" width="450" fileref="images/ch02_img012.png"/>
		    </imageobject>
		    <textobject>
				<phrase>Seleccionar servicios para cada uno de los Managers</phrase>
			</textobject>
			<caption>
					<para>Instalación de nuevo Manager y unión al cluster: seleccionar modo para el nuevo Manager</para> <!--Revisar conceptos manager/esclavo-->
			</caption>
		</mediaobject>
		<note>
			<title>Nota</title>
			<para>En caso de no seleccionar ninguna opción, el sistema atribuirá al nuevo Manager la opción <literal>1) slave</literal> por defecto.</para>
			<para>Se recomienda seleccionar el rol de esclavo al nuevo Manager ya que, de este modo, ambos Managers se reparten los servicios.</para>
		</note>	
		<para>¡Enhorabuena! Ha instalado correctamente el Manager redborder Enterprise Version. A partir de este momento, puede realizar la configuración y gestión del Manager, 
		de las Apps y sus sensores desde la plataforma web redborder.</para>
		<para>En los capítulos siguientes encontrará el procedimiento para el registro de los sensores IPS y Mail Gateway para redborder Malware. </para>
	</section>
</chapter>
